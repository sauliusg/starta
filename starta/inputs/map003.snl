#
# Test 'map' function
#

use * from std;

procedure map( p: function (x:array of type T)->(array of type T); m: array of type T ): array of type T
{
    var v = m[-1:0]; // empty slice of the array cloned

    for var i = 0 to last( m ) do
        v = push( v, p( m[i:i] ));
    enddo

    return v;
}

var m = [1,2,3];

var n = map( function (i:int[])->(int[]) { return [i[0]+1] }, m );

foreach var k in n do
    . k;
enddo
