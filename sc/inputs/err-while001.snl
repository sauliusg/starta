#
# Snail compiler tests
#
#
# Test generic array and ref indexing diagnostics
#

from std use *;

type node = null struct {
    i : int;
    next : node;
}

var node p;

p = new node;
p.next = new node;
p.next.next = new node;

p.i = 1;
p.next.i = 2;
p.next.next.i = 3;


while( (p = p.next) ) {
    . p.i;
}
